<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | WebCam</title>
    <script src="Build/UnityLoader.js"></script>
    <script>
      var gameInstance = UnityLoader.instantiate("gameContainer", "Build/cam.json");
    </script>
      <script type="text/javascript" src="myWebVR.js"></script>
      <script>
          var first = false;
          window.onload = function () {
              window.setTimeout("drawcanvas()", 10000)
              requestAnimationFrame(drawcanvas());
          }

          

          function drawcanvas() {
              if (HMD == null) {
                  console.log("getHMD");
                  getVRDevices();
              }
              HMD.getFrameData(frameData);
              var curFramePose = frameData.pose;

              var orientation = curFramePose.orientation;
              if (orientation != null) {
                  gameInstance.SendMessage('CameraSet', 'RotationX', -orientation[0]);
                  gameInstance.SendMessage('CameraSet', 'RotationY', -orientation[1]);
                  gameInstance.SendMessage('CameraSet', 'RotationZ', orientation[2]);
                  gameInstance.SendMessage('CameraSet', 'RotationW', orientation[3]);
              }
              requestAnimationFrame(drawcanvas);
          }
      </script>


  </head>
  <body>
    <div id="gameContainer" style="width: 960px; height: 600px; margin: auto"></div>
  </body>
</html>